"use strict";(self.webpackChunkexhume=self.webpackChunkexhume||[]).push([[8787],{2735:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/exhume_partition_archi-da61cdad4d58ae13d116e10d722c48dc.svg"},4899:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"exhume_partitions/library","title":"Exhume Partitions as a library","description":"If you notice something that doesn\'t work anymore, notify us on the discord server in the dedicated channel !","source":"@site/docs/exhume_partitions/library.md","sourceDirName":"exhume_partitions","slug":"/exhume_partitions/library","permalink":"/docs/exhume_partitions/library","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/docs/exhume_partitions/getting-started"},"next":{"title":"\ud83e\uddec Exhume - FileSystem","permalink":"/docs/category/-exhume---filesystem"}}');var r=t(4848),a=t(8453);const s={sidebar_position:2},o="Exhume Partitions as a library",d={},c=[{value:"Install as a library",id:"install-as-a-library",level:2},{value:"Simple example",id:"simple-example",level:3},{value:"Accessing Attributes",id:"accessing-attributes",level:3}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"exhume-partitions-as-a-library",children:"Exhume Partitions as a library"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"If you notice something that doesn't work anymore, notify us on the discord server in the dedicated channel !"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Docs Version Dropdown",src:t(2735).A+"",width:"1263",height:"503"})}),"\n",(0,r.jsx)(n.h2,{id:"install-as-a-library",children:"Install as a library"}),"\n",(0,r.jsx)(n.p,{children:"Here is a quick example of how you could use exhume partitions as a library."}),"\n",(0,r.jsx)(n.p,{children:"Create a project:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo new partition_test\ncd partition_test/src\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Open the ",(0,r.jsx)(n.code,{children:"Cargo.toml"})," file and add the ",(0,r.jsx)(n.code,{children:"exhume_body"})," and ",(0,r.jsx)(n.code,{children:"exhume_partitions"})," as dependencies:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[dependencies]\nexhume_body = "=0.3.1"\nexhume_partitions = "=0.3.0"\n\n# Required crates to log events\nlog = "0.4.25"\nenv_logger = "0.11.6"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"simple-example",children:"Simple example"}),"\n",(0,r.jsx)(n.p,{children:"Let's look at a simple code example to display the discover partitions to the screen."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'// main.rs\n\n// Importing the exhume dependencies\nuse exhume_body::Body; // To read a disk image in multiple formats\nuse exhume_partitions::Partitions; // To parse partitions\n\nfn main() {\n    // Connect our log env\n    env_logger::Builder::new().filter_level(log::LevelFilter::Info).init();\n    // We create an exhume body object to fetch our image.\n    let mut body = Body::new("/path/to/your/image.img".to_string(), "auto");\n\n    match Partitions::new(&mut body) {\n        Ok(partitions) => {\n            let partition_info = partitions.print_info();\n            println!("{}", partition_info)\n        }\n        Err(err) => {\n            println!("Could not discover partitions: {:?}", err);\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"After building and running here is a sample output bellow."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo build\nFinished `dev` profile [unoptimized + debuginfo] target(s) in 0.03s\nRunning `/partitions_test/target/debug/partitions_test`\ncargo run\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Signature                | EFI PART                                                                                                                                                                                                   |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Revision                 | 0x10000                                                                                                                                                                                                    |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Header size              | 0x5c                                                                                                                                                                                                       |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| CRC32                    | 0x3a8a95bf                                                                                                                                                                                                 |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Current LBA              | 0x1                                                                                                                                                                                                        |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Backup LBA               | 0x3c007ff                                                                                                                                                                                                  |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| First Usable LBA         | 0x22                                                                                                                                                                                                       |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Disk GUID                | d052de8c-3b65-4c63-84a4-c2488a6783ad                                                                                                                                                                       |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Partition Entry LBA      | 0x2                                                                                                                                                                                                        |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Number Of Entries        | 0x80                                                                                                                                                                                                       |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Size of one Entry        | 0x80                                                                                                                                                                                                       |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Partition Array CRC32    | 0xf1a018ef                                                                                                                                                                                                 |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Partition tables entries | +--------------------------------------+--------------------------------------+----------------------------+---------------------+-------------------+------------+--------------------------------------+ |\n|                          | | Partition GUID                       | Partition Type GUID                  | Partition Type Description | Start address (LBA) | End address (LBA) | Attributes | Partition Name                       | |\n|                          | +--------------------------------------+--------------------------------------+----------------------------+---------------------+-------------------+------------+--------------------------------------+ |\n|                          | | 6cfbbd1d-66ee-4912-82fe-4173570d3098 | 0fc63daf-8483-4772-8e79-3d69d8477de4 | Linux filesystem data      | 0x37800             | 0x3c007de         | 0          |  | |\n|                          | +--------------------------------------+--------------------------------------+----------------------------+---------------------+-------------------+------------+--------------------------------------+ |\n|                          | | 09cef2e7-e009-49f4-9cab-5ae73e63d77b | 21686148-6449-6e6f-744e-656564454649 | BIOS boot partition        | 0x800               | 0x27ff            | 0          |  | |\n|                          | +--------------------------------------+--------------------------------------+----------------------------+---------------------+-------------------+------------+--------------------------------------+ |\n|                          | | 9c5f01b2-1c29-4828-ac89-0f8c4a7759a2 | c12a7328-f81f-11d2-ba4b-00a0c93ec93b | EFI System partition       | 0x2800              | 0x377ff           | 0          |  | |\n|                          | +--------------------------------------+--------------------------------------+----------------------------+---------------------+-------------------+------------+--------------------------------------+ |\n+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n"})}),"\n",(0,r.jsx)(n.h3,{id:"accessing-attributes",children:"Accessing Attributes"}),"\n",(0,r.jsx)(n.p,{children:"You can manipulate the partition attributes to use them later in other tools. The example bellow is showing you how to access some of them:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'\nfn main() {\n    // Connect our log env\n    env_logger::Builder::new().filter_level(log::LevelFilter::Info).init();\n    // We create an exhume body object to fetch our image.\n    let mut body = Body::new("/path/to/your/image.img".to_string(), "auto");\n\n    match Partitions::new(&mut body) {\n        Ok(partitions) => {\n          match partitions.gpt {\n              Some(gpt) => {\n                println!("{:?}", &format!(\n                "{}",\n                String::from_utf8_lossy(&gpt.header.signature) // Display the gpt header signature\n            ));\n              },\n                None => (),\n            };\n        }\n        Err(err) => {\n            println!("Could not discover partitions: {:?}", err);\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Result:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'[2025-04-14T12:15:18Z INFO  exhume_body] Detected RAW Data\n[2025-04-14T12:15:18Z INFO  exhume_partitions] Detected an MBR partition scheme.\n[2025-04-14T12:15:18Z INFO  exhume_partitions] Detected a Protective MBR. GPT scheme is strongly suspected.\n[2025-04-14T12:15:18Z INFO  exhume_partitions] Discovered a GPT partition scheme\n"EFI PART"\n'})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(6540);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);